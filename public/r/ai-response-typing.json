{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-response-typing",
  "type": "registry:component",
  "title": "Fluxo de Digitação de Resposta IA",
  "description": "Animação de digitação caractere por caractere com pausas naturais e estados de pensamento",
  "registryDependencies": [
    "button"
  ],
  "dependencies": [
    "framer-motion",
    "react"
  ],
  "files": [
    {
      "path": "components/motion-core/ai-response-typing.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ntype AIResponseTypingProps = {\r\n  text?: string;\r\n  speed?: number;\r\n  showCursor?: boolean;\r\n  onComplete?: () => void;\r\n  thinkingState?: \"idle\" | \"thinking\" | \"typing\";\r\n};\r\n\r\nexport function AIResponseTyping({\r\n  text = \"Hello! I'm an AI assistant. I can help you with questions, provide information, and assist with various tasks. Feel free to ask me anything!\",\r\n  speed = 30,\r\n  showCursor = true,\r\n  onComplete,\r\n  thinkingState = \"typing\",\r\n}: AIResponseTypingProps) {\r\n  const [displayedText, setDisplayedText] = useState(\"\");\r\n  const [isThinking, setIsThinking] = useState(false);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (thinkingState === \"thinking\") {\r\n      setIsThinking(true);\r\n      setIsTyping(false);\r\n      setDisplayedText(\"\");\r\n      return;\r\n    }\r\n\r\n    if (thinkingState === \"typing\" && text) {\r\n      setIsThinking(false);\r\n      setIsTyping(true);\r\n      setDisplayedText(\"\");\r\n\r\n      let currentIndex = 0;\r\n      const chars = text.split(\"\");\r\n\r\n      const typeNextChar = () => {\r\n        if (currentIndex < chars.length) {\r\n          const nextChar = chars[currentIndex];\r\n\r\n          // Simulate natural typing pauses at punctuation\r\n          const isPause =\r\n            nextChar === \".\" ||\r\n            nextChar === \",\" ||\r\n            nextChar === \"!\" ||\r\n            nextChar === \"?\" ||\r\n            nextChar === \"\\n\";\r\n\r\n          setDisplayedText((prev) => prev + nextChar);\r\n          currentIndex++;\r\n\r\n          // Schedule next character with pause if needed\r\n          if (isPause) {\r\n            intervalRef.current = setTimeout(() => {\r\n              typeNextChar();\r\n            }, speed * 3);\r\n          } else {\r\n            intervalRef.current = setTimeout(() => {\r\n              typeNextChar();\r\n            }, speed);\r\n          }\r\n        } else {\r\n          if (intervalRef.current) clearTimeout(intervalRef.current);\r\n          setIsTyping(false);\r\n          onComplete?.();\r\n        }\r\n      };\r\n\r\n      // Start typing\r\n      typeNextChar();\r\n\r\n      return () => {\r\n        if (intervalRef.current) clearTimeout(intervalRef.current);\r\n      };\r\n    }\r\n  }, [text, speed, thinkingState, onComplete]);\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl\">\r\n      <div className=\"relative rounded-2xl border border-border bg-card p-6 min-h-[100px]\">\r\n        {/* Thinking state shimmer */}\r\n        {isThinking && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"flex items-center gap-2\"\r\n          >\r\n            <span className=\"text-muted-foreground\">Thinking</span>\r\n            <div className=\"flex gap-1\">\r\n              {[0, 1, 2].map((i) => (\r\n                <motion.div\r\n                  key={i}\r\n                  className=\"w-2 h-2 rounded-full bg-primary\"\r\n                  animate={{\r\n                    scale: [1, 1.2, 1],\r\n                    opacity: [0.5, 1, 0.5],\r\n                  }}\r\n                  transition={{\r\n                    duration: 1,\r\n                    repeat: Infinity,\r\n                    delay: i * 0.2,\r\n                    ease: \"easeInOut\",\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Typing output */}\r\n        {displayedText && (\r\n          <motion.p\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            className=\"text-foreground leading-relaxed whitespace-pre-wrap break-words\"\r\n          >\r\n            {displayedText}\r\n            {showCursor && isTyping && (\r\n              <motion.span\r\n                className=\"inline-block w-0.5 h-5 bg-primary ml-1 align-middle\"\r\n                animate={{ opacity: [1, 1, 1, 0, 0] }}\r\n                transition={{\r\n                  duration: 1,\r\n                  repeat: Infinity,\r\n                  repeatType: \"loop\",\r\n                  ease: \"linear\",\r\n                }}\r\n              />\r\n            )}\r\n            {showCursor && !isTyping && !isThinking && displayedText && (\r\n              <motion.span\r\n                className=\"inline-block w-0.5 h-5 bg-primary ml-1 align-middle opacity-50\"\r\n                animate={{ opacity: [0.5, 0.5, 0, 0] }}\r\n                transition={{\r\n                  duration: 1,\r\n                  repeat: Infinity,\r\n                  repeatType: \"loop\",\r\n                  ease: \"linear\",\r\n                  repeatDelay: 0.5,\r\n                }}\r\n              />\r\n            )}\r\n          </motion.p>\r\n        )}\r\n\r\n        {/* Shimmer effect overlay */}\r\n        {(isTyping || isThinking) && (\r\n          <motion.div\r\n            className=\"absolute inset-0 pointer-events-none overflow-hidden rounded-2xl\"\r\n            initial={{ x: \"-100%\" }}\r\n            animate={{ x: \"100%\" }}\r\n            transition={{\r\n              duration: 2,\r\n              repeat: Infinity,\r\n              ease: \"linear\",\r\n            }}\r\n            style={{\r\n              background:\r\n                \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)\",\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {/* Decorative gradient border */}\r\n        {(isTyping || isThinking) && (\r\n          <div className=\"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden\">\r\n            <motion.div\r\n              className=\"absolute inset-0 rounded-2xl\"\r\n              animate={{\r\n                background: [\r\n                  \"linear-gradient(135deg, transparent, transparent)\",\r\n                  \"linear-gradient(135deg, rgba(139, 92, 246, 0.1), transparent)\",\r\n                  \"linear-gradient(135deg, transparent, transparent)\",\r\n                ],\r\n              }}\r\n              transition={{\r\n                duration: 2,\r\n                repeat: Infinity,\r\n                ease: \"easeInOut\",\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Status indicator */}\r\n      <div className=\"mt-3 flex items-center gap-2\">\r\n        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n          <motion.div\r\n            animate={{\r\n              scale: isTyping ? [1, 1.2, 1] : 1,\r\n            }}\r\n            transition={{\r\n              duration: 0.5,\r\n              repeat: isTyping ? Infinity : 0,\r\n              ease: \"easeInOut\",\r\n            }}\r\n            className=\"w-2 h-2 rounded-full bg-green-500\"\r\n          />\r\n          <span>\r\n            {isThinking\r\n              ? \"AI is thinking...\"\r\n              : isTyping\r\n                ? \"AI is typing...\"\r\n                : \"Ready\"}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/motion-core/ai-response-typing"
    }
  ]
}