{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-chat-interface",
  "type": "registry:component",
  "title": "Interface de Chat com IA",
  "description": "Entrada de chat com anexos, seletor de modelo e controles acessíveis",
  "registryDependencies": [
    "button",
    "textarea"
  ],
  "dependencies": [
    "framer-motion",
    "lucide-react",
    "react"
  ],
  "files": [
    {
      "path": "components/components/chat/ai-chat-interface.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { AnimatePresence, motion, useReducedMotion } from \"framer-motion\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  ArrowUpRight,\r\n  ChevronDown,\r\n  Clock,\r\n  Link2,\r\n  Mail,\r\n  MessageSquare,\r\n  Share2,\r\n  Sparkles,\r\n  Star,\r\n  Zap,\r\n} from \"lucide-react\";\r\n\r\ntype DropdownType = \"share\" | \"quick\" | \"history\" | \"magic\" | \"model\" | null;\r\n\r\ntype ActionOption = {\r\n  icon: typeof Link2;\r\n  label: string;\r\n  action: string;\r\n};\r\n\r\nconst shareOptions: ActionOption[] = [\r\n  { icon: Link2, label: \"Copiar link\", action: \"copy-link\" },\r\n  { icon: Mail, label: \"E-mail\", action: \"email\" },\r\n  { icon: MessageSquare, label: \"Slack\", action: \"slack\" },\r\n];\r\n\r\nconst quickOptions: ActionOption[] = [\r\n  { icon: Sparkles, label: \"Resumir\", action: \"summarize\" },\r\n  { icon: Sparkles, label: \"Melhorar\", action: \"improve\" },\r\n  { icon: Sparkles, label: \"Traduzir\", action: \"translate\" },\r\n];\r\n\r\nconst historyOptions: ActionOption[] = [\r\n  { icon: Clock, label: \"Última hora\", action: \"history-1h\" },\r\n  { icon: Clock, label: \"Hoje\", action: \"history-today\" },\r\n  { icon: Clock, label: \"Esta semana\", action: \"history-week\" },\r\n];\r\n\r\nconst magicOptions: ActionOption[] = [\r\n  { icon: Sparkles, label: \"Autocompletar\", action: \"magic-complete\" },\r\n  { icon: Sparkles, label: \"Storyboard\", action: \"magic-storyboard\" },\r\n  { icon: Sparkles, label: \"Reformular\", action: \"magic-rephrase\" },\r\n];\r\n\r\nconst models = [\"GPT 5.0\", \"GPT 4.5 Turbo\", \"GPT 4.0\", \"Claude 3.5 Sonnet\"];\r\n\r\nexport function AIChatInterface() {\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const [activeDropdown, setActiveDropdown] = useState<DropdownType>(null);\r\n  const [selectedModel, setSelectedModel] = useState(models[0]);\r\n  const prefersReducedMotion = useReducedMotion();\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  const shouldAnimate = !prefersReducedMotion;\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (\r\n        dropdownRef.current &&\r\n        !dropdownRef.current.contains(event.target as Node)\r\n      ) {\r\n        setActiveDropdown(null);\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const handleTextareaChange = (\r\n    event: React.ChangeEvent<HTMLTextAreaElement>\r\n  ) => {\r\n    setInputValue(event.target.value);\r\n\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = \"auto\";\r\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\r\n    }\r\n  };\r\n\r\n  const renderDropdown = (\r\n    type: DropdownType,\r\n    options: ActionOption[],\r\n    align: \"left\" | \"right\" = \"left\"\r\n  ) => (\r\n    <AnimatePresence>\r\n      {activeDropdown === type && (\r\n        <motion.div\r\n          key={type}\r\n          initial={{ opacity: 0, y: -8 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -8 }}\r\n          transition={{ duration: 0.18, ease: \"easeOut\" }}\r\n          className={`absolute ${align === \"right\" ? \"right-0\" : \"left-0\"} mt-3 w-56 rounded-2xl border border-border/40 bg-background/85 py-2 shadow-[0_24px_60px_rgba(15,23,42,0.24)] backdrop-blur-xl`}\r\n          role=\"menu\"\r\n        >\r\n          {options.map((option) => (\r\n            <Button\r\n              key={option.action}\r\n              onClick={() => {\r\n                console.log(`Action: ${option.action}`);\r\n                setActiveDropdown(null);\r\n              }}\r\n              className=\"flex w-full justify-start items-center gap-3 px-4 py-2 text-sm text-foreground/85 transition-all hover:bg-foreground/[0.05] hover:text-foreground\"\r\n              role=\"menuitem\"\r\n              type=\"button\"\r\n              variant=\"ghost\"\r\n            >\r\n              <option.icon size={16} className=\"text-foreground/60\" />\r\n              <span>{option.label}</span>\r\n            </Button>\r\n          ))}\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n\r\n  return (\r\n    <motion.section\r\n      initial={shouldAnimate ? { opacity: 0, y: 20 } : { opacity: 1, y: 0 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={shouldAnimate ? { duration: 0.5 } : { duration: 0 }}\r\n      className=\"relative w-full\"\r\n    >\r\n      <div className=\"space-y-8\">\r\n        <div\r\n          className={`relative rounded-[28px] border border-border/50 bg-background/70 px-6 py-6 backdrop-blur-xl transition w-full z-10 ${\r\n            isFocused ? \"shadow-[0_28px_80px_rgba(15,23,42,0.24)]\" : \"\"\r\n          }`}\r\n        >\r\n          <div className=\"pointer-events-none absolute inset-0 bg-gradient-to-br from-primary/20/20 via-transparent to-transparent\" />\r\n          <div className=\"relative space-y-5\">\r\n            <div className=\"flex flex-col gap-1 text-left\">\r\n              <span className=\"text-xs font-semibold uppercase tracking-[0.32em] text-foreground/45\">\r\n                Prompt\r\n              </span>\r\n              <p className=\"text-sm text-foreground/60\">\r\n                Compartilhe objetivos, contexto, tom e saída desejada.\r\n              </p>\r\n            </div>\r\n            <label htmlFor=\"chat-input\" className=\"sr-only\">\r\n              Pergunte qualquer coisa à IA\r\n            </label>\r\n            <Textarea\r\n              id=\"chat-input\"\r\n              ref={textareaRef}\r\n              value={inputValue}\r\n              onChange={handleTextareaChange}\r\n              placeholder=\"Pergunte qualquer coisa à IA...\"\r\n              className=\"w-full resize-none bg-transparent text-base text-foreground/90 placeholder:text-foreground/40 focus:outline-none\"\r\n              onFocus={() => setIsFocused(true)}\r\n              onBlur={() => setIsFocused(false)}\r\n              rows={1}\r\n              aria-label=\"Chat input\"\r\n            />\r\n\r\n            <div\r\n              className=\"flex flex-wrap items-center gap-2 border-t border-border/25 pt-3\"\r\n              ref={dropdownRef}\r\n            >\r\n              <div className=\"relative\">\r\n                <Button\r\n                  onClick={() =>\r\n                    setActiveDropdown(\r\n                      activeDropdown === \"share\" ? null : \"share\"\r\n                    )\r\n                  }\r\n                  className=\"group rounded-xl p-2 bg-background/80 transition-all hover:bg-foreground/[0.05] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground/40\"\r\n                  aria-label=\"Share options\"\r\n                  aria-expanded={activeDropdown === \"share\"}\r\n                  aria-haspopup=\"menu\"\r\n                  type=\"button\"\r\n                >\r\n                  <Share2\r\n                    size={18}\r\n                    className=\"text-foreground/50 group-hover:text-foreground\"\r\n                    strokeWidth={2}\r\n                  />\r\n                </Button>\r\n                {renderDropdown(\"share\", shareOptions)}\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <Button\r\n                  onClick={() =>\r\n                    setActiveDropdown(\r\n                      activeDropdown === \"quick\" ? null : \"quick\"\r\n                    )\r\n                  }\r\n                  className=\"group rounded-xl p-2 bg-background/80 transition-all hover:bg-foreground/[0.05] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground/40\"\r\n                  aria-label=\"Quick actions\"\r\n                  aria-expanded={activeDropdown === \"quick\"}\r\n                  aria-haspopup=\"menu\"\r\n                  type=\"button\"\r\n                >\r\n                  <Zap\r\n                    size={18}\r\n                    className=\"text-foreground/50 group-hover:text-foreground\"\r\n                    strokeWidth={2}\r\n                  />\r\n                </Button>\r\n                {renderDropdown(\"quick\", quickOptions)}\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <Button\r\n                  onClick={() =>\r\n                    setActiveDropdown(\r\n                      activeDropdown === \"history\" ? null : \"history\"\r\n                    )\r\n                  }\r\n                  className=\"group rounded-xl p-2 bg-background/80 transition-all hover:bg-foreground/[0.05] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground/40\"\r\n                  aria-label=\"History\"\r\n                  aria-expanded={activeDropdown === \"history\"}\r\n                  aria-haspopup=\"menu\"\r\n                  type=\"button\"\r\n                >\r\n                  <Clock\r\n                    size={18}\r\n                    className=\"text-foreground/50 group-hover:text-foreground\"\r\n                    strokeWidth={2}\r\n                  />\r\n                </Button>\r\n                {renderDropdown(\"history\", historyOptions)}\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <Button\r\n                  onClick={() =>\r\n                    setActiveDropdown(\r\n                      activeDropdown === \"magic\" ? null : \"magic\"\r\n                    )\r\n                  }\r\n                  className=\"group rounded-xl p-2 bg-background/80 transition-all hover:bg-foreground/[0.05] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground/40\"\r\n                  aria-label=\"Magic options\"\r\n                  aria-expanded={activeDropdown === \"magic\"}\r\n                  aria-haspopup=\"menu\"\r\n                  type=\"button\"\r\n                >\r\n                  <Sparkles\r\n                    size={18}\r\n                    className=\"text-foreground/50 group-hover:text-foreground\"\r\n                    strokeWidth={2}\r\n                  />\r\n                </Button>\r\n                {renderDropdown(\"magic\", magicOptions)}\r\n              </div>\r\n\r\n              <div className=\"relative ml-auto\">\r\n                <Button\r\n                  onClick={() =>\r\n                    setActiveDropdown(\r\n                      activeDropdown === \"model\" ? null : \"model\"\r\n                    )\r\n                  }\r\n                  className=\"flex items-center gap-2 rounded-xl border border-border/30 bg-background/80 px-3 py-1.5 text-sm font-medium text-foreground/80 transition hover:border-border/40 hover:bg-background/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground/40\"\r\n                  aria-label=\"Select AI model\"\r\n                  aria-expanded={activeDropdown === \"model\"}\r\n                  aria-haspopup=\"listbox\"\r\n                  type=\"button\"\r\n                >\r\n                  <span>{selectedModel}</span>\r\n                  <ChevronDown size={16} className=\"text-foreground/50\" />\r\n                </Button>\r\n\r\n                <AnimatePresence>\r\n                  {activeDropdown === \"model\" && (\r\n                    <motion.div\r\n                      key=\"model-dropdown\"\r\n                      initial={{ opacity: 0, y: -8 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      exit={{ opacity: 0, y: -8 }}\r\n                      transition={{ duration: 0.18, ease: \"easeOut\" }}\r\n                      className=\"absolute right-0 mt-3 w-56 rounded-2xl border border-border/40 bg-background/85 py-2 shadow-[0_24px_60px_rgba(15,23,42,0.24)] backdrop-blur-xl z-50\"\r\n                      role=\"listbox\"\r\n                    >\r\n                      {models.map((model) => (\r\n                        <Button\r\n                          key={model}\r\n                          onClick={() => {\r\n                            setSelectedModel(model);\r\n                            setActiveDropdown(null);\r\n                          }}\r\n                          className={`flex w-full items-center justify-between px-4 py-2 text-sm transition-all ${\r\n                            selectedModel === model\r\n                              ? \"bg-primary/15 font-medium text-primary hover:bg-primary/20\"\r\n                              : \"text-foreground/80 hover:bg-foreground/[0.05]\"\r\n                          }`}\r\n                          role=\"option\"\r\n                          aria-selected={selectedModel === model}\r\n                          type=\"button\"\r\n                          variant={\r\n                            selectedModel === model ? \"default\" : \"ghost\"\r\n                          }\r\n                        >\r\n                          {model}\r\n                          {selectedModel === model && (\r\n                            <Star size={14} className=\"text-primary/80\" />\r\n                          )}\r\n                        </Button>\r\n                      ))}\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n              </div>\r\n\r\n              <Button\r\n                type=\"button\"\r\n                size=\"lg\"\r\n                className=\"inline-flex items-center gap-2 rounded-full px-5 text-xs uppercase tracking-[0.28em]\"\r\n                onClick={() => console.log(\"Action: send-message\")}\r\n              >\r\n                Enviar\r\n                <ArrowUpRight className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </motion.section>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/components/chat/ai-chat-interface"
    }
  ]
}