{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "messenger",
  "type": "registry:component",
  "title": "Mensageiro",
  "description": "Espaço de trabalho de mensageiro com glassmorfismo, movimento acessível e respostas rápidas",
  "registryDependencies": [
    "avatar",
    "badge",
    "button",
    "input",
    "textarea"
  ],
  "dependencies": [
    "framer-motion",
    "lucide-react",
    "react"
  ],
  "files": [
    {
      "path": "components/components/chat/messenger.tsx",
      "content": "\"use client\";\r\n\r\nimport { FormEvent, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { AnimatePresence, motion, useReducedMotion } from \"framer-motion\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  CheckCheck,\r\n  MoreVertical,\r\n  Paperclip,\r\n  Phone,\r\n  Search,\r\n  Send,\r\n  Video,\r\n} from \"lucide-react\";\r\n\r\ntype Message = {\r\n  id: string;\r\n  sender: \"user\" | \"contact\";\r\n  author: string;\r\n  text: string;\r\n  timestamp: string;\r\n};\r\n\r\ntype Conversation = {\r\n  id: string;\r\n  name: string;\r\n  title: string;\r\n  status: \"online\" | \"offline\";\r\n  unread: number;\r\n  initials: string;\r\n  messages: Message[];\r\n  quickReplies: string[];\r\n  autoReplies: string[];\r\n};\r\n\r\nconst initialConversations: Conversation[] = [\r\n  {\r\n    id: \"product-updates\",\r\n    name: \"Morgan James\",\r\n    title: \"Product Strategy\",\r\n    status: \"online\",\r\n    unread: 2,\r\n    initials: \"MJ\",\r\n    messages: [\r\n      {\r\n        id: \"product-1\",\r\n        sender: \"contact\",\r\n        author: \"Morgan\",\r\n        text: \"Thanks for the recap on the CashFlow release. The beta cohort loves the motion work.\",\r\n        timestamp: \"09:18\",\r\n      },\r\n      {\r\n        id: \"product-2\",\r\n        sender: \"user\",\r\n        author: \"You\",\r\n        text: \"Amazing to hear. Do we have a decision on the new Messenger surface?\",\r\n        timestamp: \"09:21\",\r\n      },\r\n      {\r\n        id: \"product-3\",\r\n        sender: \"contact\",\r\n        author: \"Morgan\",\r\n        text: \"Almost there. Design asked for one more pass on the animation timings — soft ease on expand.\",\r\n        timestamp: \"09:24\",\r\n      },\r\n    ],\r\n    quickReplies: [\r\n      \"I can share a timing proposal.\",\r\n      \"Let me know if you need a demo recording.\",\r\n      \"We can add an onboarding tooltip.\",\r\n    ],\r\n    autoReplies: [\r\n      \"That would help so much — a short clip would be perfect.\",\r\n      \"Can we confirm the handoff checklist by tomorrow?\",\r\n      \"Love the attention to accessibility details here.\",\r\n    ],\r\n  },\r\n  {\r\n    id: \"customer-success\",\r\n    name: \"Leah Patel\",\r\n    title: \"Customer Success\",\r\n    status: \"offline\",\r\n    unread: 0,\r\n    initials: \"LP\",\r\n    messages: [\r\n      {\r\n        id: \"success-1\",\r\n        sender: \"contact\",\r\n        author: \"Leah\",\r\n        text: \"Morning! Enterprise users keep mentioning how clear the summary cards feel.\",\r\n        timestamp: \"08:05\",\r\n      },\r\n      {\r\n        id: \"success-2\",\r\n        sender: \"user\",\r\n        author: \"You\",\r\n        text: \"Great sign. Do we need any follow-up education for folks migrating from the legacy dashboard?\",\r\n        timestamp: \"08:08\",\r\n      },\r\n      {\r\n        id: \"success-3\",\r\n        sender: \"contact\",\r\n        author: \"Leah\",\r\n        text: \"Maybe a guided walkthrough. I can draft the outline if you can provide the animation cues.\",\r\n        timestamp: \"08:11\",\r\n      },\r\n    ],\r\n    quickReplies: [\r\n      \"Happy to add cues for the walkthrough.\",\r\n      \"Let us sync after the support standup.\",\r\n      \"We can capture a Loom covering the flows.\",\r\n    ],\r\n    autoReplies: [\r\n      \"Perfect. Support will love a beat-by-beat cue list.\",\r\n      \"Thanks — I will drop a doc in the shared folder shortly.\",\r\n      \"Appreciate you keeping motion accessible throughout.\",\r\n    ],\r\n  },\r\n  {\r\n    id: \"engineering-handoff\",\r\n    name: \"Build Squad\",\r\n    title: \"Engineering Handoff\",\r\n    status: \"offline\",\r\n    unread: 1,\r\n    initials: \"BS\",\r\n    messages: [\r\n      {\r\n        id: \"build-1\",\r\n        sender: \"contact\",\r\n        author: \"Carson\",\r\n        text: \"Do you have the reduced-motion variants for Messenger handy?\",\r\n        timestamp: \"Yesterday\",\r\n      },\r\n      {\r\n        id: \"build-2\",\r\n        sender: \"user\",\r\n        author: \"You\",\r\n        text: \"Yep — exporting now with notes on keyboard focus states.\",\r\n        timestamp: \"Yesterday\",\r\n      },\r\n    ],\r\n    quickReplies: [\r\n      \"Uploading the reduced-motion recording now.\",\r\n      \"Focus ring spec is ready if you need it.\",\r\n      \"We can pair on the final QA pass.\",\r\n    ],\r\n    autoReplies: [\r\n      \"Legend — the team will plug that into the Storybook build tonight.\",\r\n      \"Appreciate the extra detail on focus management.\",\r\n      \"We will ping if anything else blocks us.\",\r\n    ],\r\n  },\r\n];\r\n\r\ntype ReplyCursorState = Record<string, number>;\r\n\r\nexport function Messenger() {\r\n  const [selectedConversationId, setSelectedConversationId] = useState<string>(\r\n    initialConversations[0]?.id ?? \"\"\r\n  );\r\n  const [conversations, setConversations] =\r\n    useState<Conversation[]>(initialConversations);\r\n  const [draft, setDraft] = useState(\"\");\r\n  const [replyCursor, setReplyCursor] = useState<ReplyCursorState>(() => {\r\n    const cursor: ReplyCursorState = {};\r\n    initialConversations.forEach((conversation) => {\r\n      cursor[conversation.id] = 0;\r\n    });\r\n    return cursor;\r\n  });\r\n  const shouldReduceMotion = useReducedMotion();\r\n  const messagesContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const liveRegionRef = useRef<HTMLDivElement | null>(null);\r\n  const selectedConversationRef = useRef<string>(selectedConversationId);\r\n  const replyTimeoutRef = useRef<number | null>(null);\r\n\r\n  const activeConversation = useMemo(() => {\r\n    return conversations.find(\r\n      (conversation) => conversation.id === selectedConversationId\r\n    );\r\n  }, [conversations, selectedConversationId]);\r\n\r\n  useEffect(() => {\r\n    selectedConversationRef.current = selectedConversationId;\r\n    setConversations((prev) =>\r\n      prev.map((conversation) =>\r\n        conversation.id === selectedConversationId\r\n          ? { ...conversation, unread: 0 }\r\n          : conversation\r\n      )\r\n    );\r\n  }, [selectedConversationId]);\r\n\r\n  useEffect(() => {\r\n    if (!messagesContainerRef.current) {\r\n      return;\r\n    }\r\n    const container = messagesContainerRef.current;\r\n    const behavior = shouldReduceMotion ? \"auto\" : \"smooth\";\r\n\r\n    const scrollToBottom = () => {\r\n      container.scrollTo({ top: container.scrollHeight, behavior });\r\n    };\r\n\r\n    if (behavior === \"smooth\") {\r\n      requestAnimationFrame(scrollToBottom);\r\n    } else {\r\n      scrollToBottom();\r\n    }\r\n  }, [\r\n    activeConversation?.messages,\r\n    activeConversation?.id,\r\n    shouldReduceMotion,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (replyTimeoutRef.current) {\r\n        window.clearTimeout(replyTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!liveRegionRef.current || !activeConversation) {\r\n      return;\r\n    }\r\n    const lastMessage =\r\n      activeConversation.messages[activeConversation.messages.length - 1];\r\n    if (!lastMessage) {\r\n      return;\r\n    }\r\n    liveRegionRef.current.textContent =\r\n      lastMessage.author +\r\n      \" at \" +\r\n      lastMessage.timestamp +\r\n      \": \" +\r\n      lastMessage.text;\r\n  }, [activeConversation?.messages, activeConversation]);\r\n\r\n  const handleSelectConversation = (conversationId: string) => {\r\n    setSelectedConversationId(conversationId);\r\n  };\r\n\r\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (!draft.trim() || !activeConversation) {\r\n      return;\r\n    }\r\n\r\n    const conversationId = activeConversation.id;\r\n    const timestamp = new Date().toLocaleTimeString(\"en-US\", {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n    const outgoing: Message = {\r\n      id: \"outgoing-\" + Date.now().toString(),\r\n      sender: \"user\",\r\n      author: \"You\",\r\n      text: draft.trim(),\r\n      timestamp,\r\n    };\r\n\r\n    setConversations((prev) =>\r\n      prev.map((conversation) =>\r\n        conversation.id === conversationId\r\n          ? {\r\n              ...conversation,\r\n              messages: [...conversation.messages, outgoing],\r\n              unread: 0,\r\n            }\r\n          : conversation\r\n      )\r\n    );\r\n    setDraft(\"\");\r\n\r\n    const autoReplies = activeConversation.autoReplies;\r\n    if (!autoReplies.length) {\r\n      return;\r\n    }\r\n\r\n    const cursor = replyCursor[conversationId] ?? 0;\r\n    const nextReply = autoReplies[cursor % autoReplies.length];\r\n    const delay = shouldReduceMotion ? 0 : 900;\r\n\r\n    replyTimeoutRef.current = window.setTimeout(() => {\r\n      const safeTimestamp = new Date().toLocaleTimeString(\"en-US\", {\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n      });\r\n      const incoming: Message = {\r\n        id: \"incoming-\" + Date.now().toString(),\r\n        sender: \"contact\",\r\n        author: activeConversation.name,\r\n        text: nextReply,\r\n        timestamp: safeTimestamp,\r\n      };\r\n\r\n      const currentSelected = selectedConversationRef.current;\r\n      setConversations((prev) =>\r\n        prev.map((conversation) => {\r\n          if (conversation.id !== conversationId) {\r\n            return conversation;\r\n          }\r\n          const isActive = currentSelected === conversationId;\r\n          return {\r\n            ...conversation,\r\n            messages: [...conversation.messages, incoming],\r\n            unread: isActive ? 0 : conversation.unread + 1,\r\n          };\r\n        })\r\n      );\r\n\r\n      setReplyCursor((prev) => ({\r\n        ...prev,\r\n        [conversationId]: cursor + 1,\r\n      }));\r\n    }, delay);\r\n  };\r\n\r\n  if (!activeConversation) {\r\n    return null;\r\n  }\r\n\r\n  const statusDotColor: Record<Conversation[\"status\"], string> = {\r\n    online: \"bg-green-500\",\r\n    offline: \"bg-red-500\",\r\n  };\r\n\r\n  return (\r\n    <section className=\"relative w-full py-6 sm:py-8 md:py-12 lg:py-16\">\r\n      <div className=\"relative grid min-h-[500px] max-h-[calc(100vh-3rem)] grid-rows-[auto,1fr] gap-4 overflow-hidden rounded-[30px] border border-border/50 bg-background/70 p-4 backdrop-blur-xl sm:min-h-[600px] sm:max-h-[calc(100vh-4rem)] sm:gap-6 sm:p-6 md:min-h-[650px] md:max-h-[calc(100vh-5rem)] lg:h-[760px] lg:max-h-[calc(100vh-6rem)] lg:grid-rows-[1fr] lg:gap-8 lg:p-8 lg:[grid-template-columns:30%_1fr]\">\r\n        <div className=\"flex flex-col gap-3 rounded-2xl border border-border/40 bg-background/75 p-3 backdrop-blur sm:gap-4 sm:rounded-3xl sm:p-4 lg:hidden\">\r\n          <div className=\"flex items-center justify-between gap-2 sm:gap-3\">\r\n            <div>\r\n              <p className=\"text-xs font-semibold text-foreground sm:text-sm\">\r\n                Messenger\r\n              </p>\r\n              <p className=\"text-[0.65rem] text-muted-foreground sm:text-xs\">\r\n                {conversations.length} active conversation\r\n                {conversations.length === 1 ? \"\" : \"s\"}\r\n              </p>\r\n            </div>\r\n            <Badge\r\n              variant=\"outline\"\r\n              className=\"rounded-full border border-border/50 bg-primary/15 px-2 py-0.5 text-[0.65rem] uppercase tracking-[0.2em] text-primary hover:bg-primary/15 hover:text-primary sm:px-3 sm:py-1 sm:text-[0.7rem] sm:tracking-[0.24em]\"\r\n            >\r\n              Live\r\n            </Badge>\r\n          </div>\r\n          <div className=\"space-y-1.5 sm:space-y-2\">\r\n            <label\r\n              htmlFor=\"messenger-conversation\"\r\n              className=\"text-[0.65rem] font-medium text-muted-foreground sm:text-xs\"\r\n            >\r\n              Conversation\r\n            </label>\r\n            <select\r\n              id=\"messenger-conversation\"\r\n              value={selectedConversationId}\r\n              onChange={(event) => handleSelectConversation(event.target.value)}\r\n              className=\"w-full rounded-xl border border-border/40 bg-background/70 px-2.5 py-1.5 text-xs text-foreground focus:border-primary/40 focus:outline-none focus:ring-2 focus:ring-primary/30 sm:rounded-2xl sm:px-3 sm:py-2 sm:text-sm\"\r\n            >\r\n              {conversations.map((conversation) => (\r\n                <option key={conversation.id} value={conversation.id}>\r\n                  {conversation.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"hidden h-full flex-col gap-5 overflow-hidden rounded-3xl border border-border/40 bg-background/75 p-4 backdrop-blur lg:flex lg:col-start-1 lg:col-end-2\">\r\n          <div className=\"flex items-center justify-between gap-3\">\r\n            <div>\r\n              <p className=\"text-sm font-semibold text-foreground\">Messenger</p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {conversations.length} active conversation\r\n                {conversations.length === 1 ? \"\" : \"s\"}\r\n              </p>\r\n            </div>\r\n            <Badge\r\n              variant=\"outline\"\r\n              className=\"rounded-full border border-border/50 bg-primary/15 px-3 py-1 text-[0.7rem] uppercase tracking-[0.24em] text-primary hover:bg-primary/15 hover:text-primary\"\r\n            >\r\n              Live\r\n            </Badge>\r\n          </div>\r\n\r\n          <label htmlFor=\"messenger-search\" className=\"sr-only\">\r\n            Search conversations\r\n          </label>\r\n          <div className=\"relative\">\r\n            <Search\r\n              className=\"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground/70\"\r\n              aria-hidden=\"true\"\r\n            />\r\n            <Input\r\n              id=\"messenger-search\"\r\n              type=\"search\"\r\n              placeholder=\"Search teammates or channels\"\r\n              className=\"w-full rounded-2xl border-border/40 bg-background/60 pl-10 text-sm text-foreground placeholder:text-muted-foreground/70 focus-visible:ring-2 focus-visible:ring-primary/40\"\r\n            />\r\n          </div>\r\n\r\n          <div\r\n            className=\"flex-1 space-y-2 overflow-y-auto pr-1\"\r\n            aria-label=\"Conversation list\"\r\n            role=\"list\"\r\n          >\r\n            {conversations.map((conversation) => {\r\n              const isActive = conversation.id === selectedConversationId;\r\n              const lastMessage =\r\n                conversation.messages[conversation.messages.length - 1];\r\n              return (\r\n                <motion.button\r\n                  key={conversation.id}\r\n                  type=\"button\"\r\n                  onClick={() => handleSelectConversation(conversation.id)}\r\n                  aria-pressed={isActive}\r\n                  className={cn(\r\n                    \"group relative flex w-full items-start gap-3 rounded-2xl border border-transparent p-3 text-left transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\r\n                    isActive\r\n                      ? \"border-primary/40 bg-primary/10\"\r\n                      : \"bg-background/70 hover:border-border/40 hover:bg-muted/40\"\r\n                  )}\r\n                  role=\"listitem\"\r\n                >\r\n                  <div className=\"relative shrink-0\">\r\n                    <Avatar className=\"h-10 w-10 rounded-2xl border border-border/40 bg-background/80 text-foreground\">\r\n                      <AvatarFallback className=\"rounded-2xl bg-primary/15 text-sm font-medium text-primary\">\r\n                        {conversation.initials}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <span\r\n                      className={cn(\r\n                        \"absolute bottom-0 right-0 inline-flex h-3 w-3 rounded-full border-2 border-background\",\r\n                        statusDotColor[conversation.status]\r\n                      )}\r\n                      aria-label={\r\n                        conversation.status === \"online\" ? \"Online\" : \"Offline\"\r\n                      }\r\n                    />\r\n                  </div>\r\n                  <div className=\"min-w-0 flex-1 space-y-1\">\r\n                    <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-semibold text-foreground\">\r\n                          {conversation.name}\r\n                        </p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {conversation.title}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    {lastMessage ? (\r\n                      <p className=\"line-clamp-2 text-xs text-muted-foreground\">\r\n                        {lastMessage.author}: {lastMessage.text}\r\n                      </p>\r\n                    ) : (\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        No messages yet\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  {conversation.unread > 0 && (\r\n                    <span className=\"ml-2 inline-flex min-h-[1.5rem] min-w-[1.5rem] items-center justify-center rounded-full bg-primary text-[0.7rem] font-semibold text-primary-foreground shadow-lg\">\r\n                      {conversation.unread}\r\n                    </span>\r\n                  )}\r\n                </motion.button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <AnimatePresence initial={false} mode=\"wait\">\r\n          <motion.div\r\n            key={activeConversation.id}\r\n            initial={\r\n              shouldReduceMotion ? { opacity: 1 } : { opacity: 0, y: 12 }\r\n            }\r\n            animate={shouldReduceMotion ? { opacity: 1 } : { opacity: 1, y: 0 }}\r\n            exit={shouldReduceMotion ? { opacity: 0 } : { opacity: 0, y: -12 }}\r\n            transition={{ duration: 0.32, ease: \"easeOut\" }}\r\n            className=\"flex min-h-0 flex-col gap-4 overflow-hidden rounded-3xl border border-border/40 bg-background/80 p-4 backdrop-blur sm:gap-5 sm:p-5 md:gap-6 md:p-6 lg:col-start-2 lg:col-end-3\"\r\n          >\r\n            <header className=\"flex flex-wrap items-center justify-between gap-3 sm:gap-4\">\r\n              <div className=\"flex items-center gap-2 sm:gap-3\">\r\n                <div className=\"relative\">\r\n                  <Avatar className=\"h-10 w-10 rounded-2xl border border-border/40 bg-card/80 text-foreground sm:h-12 sm:w-12 sm:rounded-3xl\">\r\n                    <AvatarFallback className=\"rounded-2xl bg-primary/20 text-sm font-semibold text-primary sm:rounded-3xl sm:text-base\">\r\n                      {activeConversation.initials}\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                  <span\r\n                    className={cn(\r\n                      \"absolute bottom-0 right-0 inline-flex h-3 w-3 rounded-full border-2 border-background sm:h-3.5 sm:w-3.5\",\r\n                      statusDotColor[activeConversation.status]\r\n                    )}\r\n                    aria-label={\r\n                      activeConversation.status === \"online\"\r\n                        ? \"Online\"\r\n                        : \"Offline\"\r\n                    }\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-semibold text-foreground sm:text-base\">\r\n                    {activeConversation.name}\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground sm:text-sm\">\r\n                    {activeConversation.title}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-1.5 sm:gap-2\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"size-8 rounded-full border border-border/40 bg-background/60 text-muted-foreground transition hover:bg-muted/60 focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background sm:size-10\"\r\n                  aria-label=\"Start audio call\"\r\n                >\r\n                  <Phone className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"size-8 rounded-full border border-border/40 bg-background/60 text-muted-foreground transition hover:bg-muted/60 focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background sm:size-10\"\r\n                  aria-label=\"Start video call\"\r\n                >\r\n                  <Video className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"size-8 rounded-full border border-border/40 bg-background/60 text-muted-foreground transition hover:bg-muted/60 focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background sm:size-10\"\r\n                  aria-label=\"Open conversation menu\"\r\n                >\r\n                  <MoreVertical className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\r\n                </Button>\r\n              </div>\r\n            </header>\r\n\r\n            <div\r\n              ref={messagesContainerRef}\r\n              className=\"relative flex-1 min-h-0 space-y-3 overflow-y-auto pr-2 sm:space-y-4 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-muted\"\r\n              aria-live=\"off\"\r\n              aria-label={\"Message thread with \" + activeConversation.name}\r\n            >\r\n              <AnimatePresence initial={false}>\r\n                {activeConversation.messages.map((message) => (\r\n                  <motion.div\r\n                    key={message.id}\r\n                    initial={\r\n                      shouldReduceMotion\r\n                        ? false\r\n                        : { opacity: 0, y: 12, scale: 0.98 }\r\n                    }\r\n                    animate={\r\n                      shouldReduceMotion\r\n                        ? { opacity: 1 }\r\n                        : { opacity: 1, y: 0, scale: 1 }\r\n                    }\r\n                    exit={{ opacity: 0, y: 0 }}\r\n                    transition={{ duration: 0.28, ease: \"easeOut\" }}\r\n                    className=\"flex flex-col gap-1\"\r\n                    role=\"group\"\r\n                    aria-label={message.author + \" at \" + message.timestamp}\r\n                  >\r\n                    <div\r\n                      className={cn(\r\n                        \"relative max-w-[85%] rounded-xl border border-border/40 bg-background/80 px-3 py-2 text-xs leading-relaxed text-foreground backdrop-blur sm:max-w-[82%] sm:rounded-2xl sm:px-4 sm:py-3 sm:text-sm\",\r\n                        message.sender === \"user\" &&\r\n                          \"ml-auto border-primary/40 bg-primary text-primary-foreground\"\r\n                      )}\r\n                    >\r\n                      <p className=\"font-medium text-foreground/80 sm:text-sm\">\r\n                        {message.author}\r\n                      </p>\r\n                      <p\r\n                        className={cn(\r\n                          \"mt-1 text-[0.875rem] sm:text-[0.95rem]\",\r\n                          message.sender === \"user\"\r\n                            ? \"text-primary-foreground/90\"\r\n                            : \"text-foreground/90\"\r\n                        )}\r\n                      >\r\n                        {message.text}\r\n                      </p>\r\n                      <div className=\"mt-2 flex items-center justify-end gap-1.5 text-[0.65rem] sm:mt-3 sm:gap-2 sm:text-[0.7rem]\">\r\n                        <span\r\n                          className={cn(\r\n                            \"text-muted-foreground\",\r\n                            message.sender === \"user\" &&\r\n                              \"text-primary-foreground/80\"\r\n                          )}\r\n                        >\r\n                          {message.timestamp}\r\n                        </span>\r\n                        {message.sender === \"user\" && (\r\n                          <CheckCheck\r\n                            className=\"h-3 w-3 text-primary-foreground/80 sm:h-3.5 sm:w-3.5\"\r\n                            aria-hidden=\"true\"\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n              </AnimatePresence>\r\n            </div>\r\n\r\n            <form\r\n              onSubmit={handleSubmit}\r\n              className=\"space-y-2 sm:space-y-3\"\r\n              aria-label=\"Reply composer\"\r\n            >\r\n              <label htmlFor=\"messenger-editor\" className=\"sr-only\">\r\n                Write a message\r\n              </label>\r\n              <div className=\"flex items-end gap-2 rounded-2xl border border-border/40 bg-background/80 p-3 backdrop-blur sm:gap-3 sm:rounded-3xl sm:p-4\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <Textarea\r\n                    id=\"messenger-editor\"\r\n                    value={draft}\r\n                    onChange={(event) => setDraft(event.target.value)}\r\n                    placeholder={\"Message \" + activeConversation.name}\r\n                    rows={2}\r\n                    className=\"min-h-[3rem] w-full resize-none border-none bg-transparent text-xs text-foreground placeholder:text-muted-foreground/70 focus-visible:ring-0 focus-visible:outline-none sm:min-h-[4rem] sm:text-sm\"\r\n                    aria-label={\"Message \" + activeConversation.name}\r\n                  />\r\n                  <div className=\"mt-2 flex flex-wrap gap-1.5 sm:mt-3 sm:gap-2\">\r\n                    {activeConversation.quickReplies.map((reply) => (\r\n                      <button\r\n                        key={reply}\r\n                        type=\"button\"\r\n                        onClick={() => setDraft(reply)}\r\n                        className=\"rounded-full border border-border/50 bg-background/70 px-2.5 py-0.5 text-[0.65rem] text-muted-foreground transition hover:border-primary/40 hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background sm:px-3 sm:py-1 sm:text-xs\"\r\n                      >\r\n                        {reply}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex shrink-0 flex-col items-end gap-1.5 sm:w-24 sm:gap-2\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"size-8 rounded-full border border-border/40 bg-background/70 text-muted-foreground transition hover:bg-muted/50 focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background sm:size-10\"\r\n                    aria-label=\"Attach a file\"\r\n                  >\r\n                    <Paperclip className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    size=\"icon\"\r\n                    className=\"size-8 rounded-full bg-primary text-primary-foreground shadow-lg transition hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-60 sm:size-10\"\r\n                    disabled={!draft.trim()}\r\n                    aria-label=\"Send message\"\r\n                  >\r\n                    <Send\r\n                      className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\"\r\n                      aria-hidden=\"true\"\r\n                    />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n      <div\r\n        ref={liveRegionRef}\r\n        className=\"sr-only\"\r\n        aria-live=\"polite\"\r\n        aria-atomic=\"true\"\r\n      />\r\n    </section>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/components/chat/messenger"
    }
  ]
}