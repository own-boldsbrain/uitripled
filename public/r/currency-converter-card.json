{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "currency-converter-card",
  "type": "registry:block",
  "title": "Cartão Conversor de Moeda",
  "description": "Widget de conversão financeira com entradas animadas, atualizações de câmbio simuladas e feedback contextual",
  "registryDependencies": [
    "button",
    "card"
  ],
  "dependencies": [
    "framer-motion",
    "lucide-react",
    "react"
  ],
  "files": [
    {
      "path": "components/sections/currency-converter-card.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { ArrowLeftRight, TrendingUp } from \"lucide-react\";\r\n\r\ntype Currency = {\r\n  code: string;\r\n  name: string;\r\n  symbol: string;\r\n};\r\n\r\ntype CurrencyCode = (typeof CURRENCIES)[number][\"code\"];\r\n\r\nconst CURRENCIES: Currency[] = [\r\n  { code: \"USD\", name: \"Dólar Americano\", symbol: \"$\" },\r\n  { code: \"EUR\", name: \"Euro\", symbol: \"€\" },\r\n  { code: \"GBP\", name: \"Libra Esterlina\", symbol: \"£\" },\r\n  { code: \"JPY\", name: \"Iene Japonês\", symbol: \"¥\" },\r\n  { code: \"AUD\", name: \"Dólar Australiano\", symbol: \"A$\" },\r\n  { code: \"CAD\", name: \"Dólar Canadense\", symbol: \"C$\" },\r\n  { code: \"CHF\", name: \"Franco Suíço\", symbol: \"CHF\" },\r\n  { code: \"CNY\", name: \"Yuan Chinês\", symbol: \"¥\" },\r\n  { code: \"INR\", name: \"Rúpia Indiana\", symbol: \"₹\" },\r\n  { code: \"MXN\", name: \"Peso Mexicano\", symbol: \"$\" },\r\n];\r\n\r\nconst BASE_INDEX: Record<CurrencyCode, number> = {\r\n  USD: 1,\r\n  EUR: 0.92,\r\n  GBP: 0.78,\r\n  JPY: 147.42,\r\n  AUD: 1.5,\r\n  CAD: 1.36,\r\n  CHF: 0.88,\r\n  CNY: 7.11,\r\n  INR: 83.24,\r\n  MXN: 17.12,\r\n};\r\n\r\nexport function CurrencyConverterCard() {\r\n  const [amount, setAmount] = useState<string>(\"100\");\r\n  const [fromCurrency, setFromCurrency] = useState<CurrencyCode>(\"USD\");\r\n  const [toCurrency, setToCurrency] = useState<CurrencyCode>(\"EUR\");\r\n  const [result, setResult] = useState<number | null>(null);\r\n  const [rate, setRate] = useState<number | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isFlipped, setIsFlipped] = useState(false);\r\n  const [error, setError] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    const trimmed = amount.trim();\r\n\r\n    if (!trimmed) {\r\n      setLoading(false);\r\n      setError(\"\");\r\n      setRate(null);\r\n      setResult(null);\r\n      return;\r\n    }\r\n\r\n    const numericAmount = Number(trimmed);\r\n\r\n    if (Number.isNaN(numericAmount)) {\r\n      setLoading(false);\r\n      setError(\"Enter a valid amount\");\r\n      setRate(null);\r\n      setResult(null);\r\n      return;\r\n    }\r\n\r\n    let cancelled = false;\r\n\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    const timeout = window.setTimeout(() => {\r\n      if (cancelled) return;\r\n\r\n      const fromIndex = BASE_INDEX[fromCurrency];\r\n      const toIndex = BASE_INDEX[toCurrency];\r\n\r\n      if (!fromIndex || !toIndex) {\r\n        setError(\"Unsupported currency selection\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const nextRate = toIndex / fromIndex;\r\n\r\n      setRate(nextRate);\r\n      setResult(numericAmount * nextRate);\r\n      setIsFlipped((previous) => !previous);\r\n      setLoading(false);\r\n    }, 220);\r\n\r\n    return () => {\r\n      cancelled = true;\r\n      window.clearTimeout(timeout);\r\n    };\r\n  }, [amount, fromCurrency, toCurrency]);\r\n\r\n  const formattedResult = useMemo(() => {\r\n    if (result === null) return \"0.00\";\r\n\r\n    return result.toLocaleString(undefined, {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    });\r\n  }, [result]);\r\n\r\n  const activeRate = useMemo(() => {\r\n    if (!rate) return null;\r\n\r\n    return rate.toFixed(4);\r\n  }, [rate]);\r\n\r\n  const handleSwap = () => {\r\n    setFromCurrency(toCurrency);\r\n    setToCurrency(fromCurrency);\r\n  };\r\n\r\n  const amountSymbol =\r\n    CURRENCIES.find((currency) => currency.code === fromCurrency)?.symbol ??\r\n    \"$\";\r\n  const resultSymbol =\r\n    CURRENCIES.find((currency) => currency.code === toCurrency)?.symbol ?? \"$\";\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 24 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.4, ease: \"easeOut\" }}\r\n      className=\"group mx-auto w-full relative\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-gradient-to-br from-foreground/[0.04] via-transparent to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100 -z-10  rounded-2xl\" />\r\n      <div className=\"relative overflow-hidden border border-border/60 bg-card/80 backdrop-blur  rounded-2xl\">\r\n        <div className=\"space-y-1 px-6 pt-6 pb-4\">\r\n          <h2 className=\"flex items-center gap-2 text-2xl font-semibold text-foreground\">\r\n            <TrendingUp className=\"h-6 w-6 text-primary\" />\r\n            Conversor de Moedas\r\n          </h2>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Experiência simulada de câmbio em tempo real\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-6 px-6 pb-6\">\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-muted-foreground\">\r\n              De\r\n            </label>\r\n            <div className=\"flex gap-3\">\r\n              <div className=\"relative flex-1\">\r\n                <span className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-sm font-medium text-muted-foreground\">\r\n                  {amountSymbol}\r\n                </span>\r\n                <input\r\n                  type=\"number\"\r\n                  inputMode=\"decimal\"\r\n                  value={amount}\r\n                  onChange={(event) => setAmount(event.target.value)}\r\n                  placeholder=\"Valor\"\r\n                  className=\"w-full rounded-lg border border-border bg-background/70 px-8 py-3 text-lg font-semibold text-foreground shadow-sm outline-none transition focus-visible:ring-2 focus-visible:ring-primary/40\"\r\n                />\r\n              </div>\r\n              <select\r\n                value={fromCurrency}\r\n                onChange={(event) =>\r\n                  setFromCurrency(event.target.value as CurrencyCode)\r\n                }\r\n                className=\"w-[132px] rounded-lg border border-border bg-background px-3 py-3 text-sm font-semibold text-foreground shadow-sm transition focus-visible:ring-2 focus-visible:ring-primary/40\"\r\n              >\r\n                {CURRENCIES.map((currency) => (\r\n                  <option key={currency.code} value={currency.code}>\r\n                    {currency.symbol} {currency.code}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-center\">\r\n            <motion.button\r\n              type=\"button\"\r\n              whileHover={{ scale: 1.06 }}\r\n              whileTap={{ scale: 0.94 }}\r\n              onClick={handleSwap}\r\n              disabled={loading}\r\n              className=\"flex h-12 w-12 items-center justify-center rounded-full border border-border/70 bg-background/50 text-foreground transition hover:bg-background/70 disabled:cursor-not-allowed disabled:opacity-50\"\r\n            >\r\n              <ArrowLeftRight className=\"h-5 w-5\" />\r\n            </motion.button>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-muted-foreground\">\r\n              Para\r\n            </label>\r\n            <div className=\"flex gap-3\">\r\n              <motion.div\r\n                key={isFlipped ? \"flipped\" : \"stationary\"}\r\n                initial={{ rotateX: 90, opacity: 0 }}\r\n                animate={{ rotateX: 0, opacity: 1 }}\r\n                transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n                className=\"relative flex-1\"\r\n              >\r\n                <span className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-sm font-medium text-muted-foreground\">\r\n                  {resultSymbol}\r\n                </span>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formattedResult}\r\n                  readOnly\r\n                  className=\"w-full rounded-lg border border-border bg-background/60 px-8 py-3 text-lg font-semibold text-foreground shadow-sm outline-none transition focus-visible:ring-2 focus-visible:ring-primary/40\"\r\n                />\r\n              </motion.div>\r\n              <select\r\n                value={toCurrency}\r\n                onChange={(event) =>\r\n                  setToCurrency(event.target.value as CurrencyCode)\r\n                }\r\n                className=\"w-[132px] rounded-lg border border-border bg-background px-3 py-3 text-sm font-semibold text-foreground shadow-sm transition focus-visible:ring-2 focus-visible:ring-primary/40\"\r\n              >\r\n                {CURRENCIES.map((currency) => (\r\n                  <option key={currency.code} value={currency.code}>\r\n                    {currency.symbol} {currency.code}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {loading && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              className=\"flex items-center justify-center gap-2 rounded-lg border border-border bg-background/60 px-4 py-3 text-sm text-muted-foreground\"\r\n            >\r\n              <motion.span\r\n                className=\"h-4 w-4 rounded-full border-2 border-muted-foreground/60 border-t-transparent\"\r\n                animate={{ rotate: 360 }}\r\n                transition={{ repeat: Infinity, duration: 0.8, ease: \"linear\" }}\r\n              />\r\n              Calculando taxas mais recentes...\r\n            </motion.div>\r\n          )}\r\n\r\n          {!loading && activeRate && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              className=\"rounded-lg border border-primary/20 bg-primary/5 px-4 py-3 text-center text-sm font-medium text-primary\"\r\n            >\r\n              1 {fromCurrency} ≈ {activeRate} {toCurrency}\r\n            </motion.div>\r\n          )}\r\n\r\n          {error && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              className=\"rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-center text-sm font-medium text-destructive\"\r\n            >\r\n              {error}\r\n            </motion.div>\r\n          )}\r\n\r\n          {!loading && !error && (\r\n            <p className=\"text-center text-xs text-muted-foreground\">\r\n              As taxas são aproximadas para fins de demonstração e são\r\n              atualizadas a cada mudança.\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n",
      "type": "registry:block",
      "target": "components/sections/currency-converter-card"
    }
  ]
}