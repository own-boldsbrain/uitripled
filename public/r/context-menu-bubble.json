{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "context-menu-bubble",
  "type": "registry:component",
  "title": "Bolha de Menu de Contexto",
  "description": "Clique direito revela menu radial circular expansível com ícones",
  "registryDependencies": [
    "button"
  ],
  "dependencies": [
    "framer-motion",
    "lucide-react",
    "react"
  ],
  "files": [
    {
      "path": "components/motion-core/context-menu-bubble.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState, useRef, MouseEvent } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { MoreVertical, Edit, Trash2, Copy, Share2 } from \"lucide-react\";\r\n\r\ntype MenuItem = {\r\n  label: string;\r\n  icon: React.ReactNode;\r\n  onClick: () => void;\r\n  danger?: boolean;\r\n};\r\n\r\ntype ContextMenuBubbleProps = {\r\n  items?: MenuItem[];\r\n};\r\n\r\nexport function ContextMenuBubble({\r\n  items = [\r\n    { label: \"Edit\", icon: <Edit className=\"h-4 w-4\" />, onClick: () => {} },\r\n    { label: \"Copy\", icon: <Copy className=\"h-4 w-4\" />, onClick: () => {} },\r\n    { label: \"Share\", icon: <Share2 className=\"h-4 w-4\" />, onClick: () => {} },\r\n    {\r\n      label: \"Delete\",\r\n      icon: <Trash2 className=\"h-4 w-4\" />,\r\n      onClick: () => {},\r\n      danger: true,\r\n    },\r\n  ],\r\n}: ContextMenuBubbleProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const triggerRef = useRef<HTMLButtonElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const updatePosition = () => {\r\n    if (triggerRef.current && containerRef.current) {\r\n      const buttonRect = triggerRef.current.getBoundingClientRect();\r\n      const containerRect = containerRef.current.getBoundingClientRect();\r\n      setPosition({\r\n        x: buttonRect.left + buttonRect.width / 2 - containerRect.left,\r\n        y: buttonRect.top + buttonRect.height / 2 - containerRect.top,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleContextMenu = (e: MouseEvent) => {\r\n    e.preventDefault();\r\n    updatePosition();\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const handleClick = () => {\r\n    updatePosition();\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  const closeMenu = () => setIsOpen(false);\r\n\r\n  const itemCount = items.length;\r\n  const radius = 80;\r\n  const angleStep = (2 * Math.PI) / itemCount;\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"relative flex h-64 w-full items-center justify-center overflow-hidden rounded-2xl\"\r\n    >\r\n      <motion.button\r\n        ref={triggerRef}\r\n        onContextMenu={handleContextMenu}\r\n        onClick={handleClick}\r\n        whileHover={{ scale: 1.1 }}\r\n        whileTap={{ scale: 0.9 }}\r\n        className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary text-primary-foreground\"\r\n      >\r\n        <MoreVertical className=\"h-5 w-5\" />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <>\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              onClick={closeMenu}\r\n              className=\"fixed inset-0 z-40\"\r\n            />\r\n\r\n            <motion.div\r\n              initial={{ scale: 0, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0, opacity: 0 }}\r\n              transition={{\r\n                type: \"spring\",\r\n                stiffness: 300,\r\n                damping: 25,\r\n              }}\r\n              className=\"absolute z-50 flex h-40 w-40 items-center justify-center\"\r\n              style={{\r\n                left: position.x - 80,\r\n                top: position.y - 80,\r\n              }}\r\n            >\r\n              <div className=\"absolute inset-0 rounded-full bg-background/95 backdrop-blur-sm\" />\r\n\r\n              {items.map((item, index) => {\r\n                const angle = index * angleStep - Math.PI / 2;\r\n                const x = Math.cos(angle) * radius;\r\n                const y = Math.sin(angle) * radius;\r\n\r\n                return (\r\n                  <motion.button\r\n                    key={item.label}\r\n                    initial={{ scale: 0, opacity: 0, x: 0, y: 0 }}\r\n                    animate={{\r\n                      scale: 1,\r\n                      opacity: 1,\r\n                      x,\r\n                      y,\r\n                      rotate: 360,\r\n                    }}\r\n                    exit={{ scale: 0, opacity: 0, x: 0, y: 0 }}\r\n                    transition={{\r\n                      delay: index * 0.05,\r\n                      type: \"spring\",\r\n                      stiffness: 300,\r\n                      damping: 25,\r\n                    }}\r\n                    whileHover={{ scale: 1.2 }}\r\n                    whileTap={{ scale: 0.9 }}\r\n                    onClick={() => {\r\n                      item.onClick();\r\n                      closeMenu();\r\n                    }}\r\n                    className={`absolute flex h-10 w-10 items-center justify-center rounded-full border border-border bg-card shadow-lg transition-colors ${\r\n                      item.danger\r\n                        ? \"hover:bg-destructive hover:text-destructive-foreground\"\r\n                        : \"hover:bg-primary hover:text-primary-foreground\"\r\n                    }`}\r\n                  >\r\n                    {item.icon}\r\n                  </motion.button>\r\n                );\r\n              })}\r\n\r\n              <button\r\n                onClick={closeMenu}\r\n                className=\"absolute flex h-10 w-10 items-center justify-center rounded-full bg-card\"\r\n              >\r\n                <MoreVertical className=\"h-5 w-5\" />\r\n              </button>\r\n            </motion.div>\r\n          </>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/motion-core/context-menu-bubble"
    }
  ]
}