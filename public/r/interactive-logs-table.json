{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "interactive-logs-table",
  "type": "registry:block",
  "title": "Tabela de Logs Interativa",
  "description": "Painel de logs de observabilidade com filtros animados, pesquisa e linhas expans√≠veis",
  "registryDependencies": [
    "badge",
    "button",
    "input"
  ],
  "dependencies": [
    "framer-motion",
    "lucide-react",
    "react"
  ],
  "files": [
    {
      "path": "components/sections/interactive-logs-table.tsx",
      "content": "\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { Check, ChevronDown, Filter, Search } from \"lucide-react\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\ntype LogLevel = \"info\" | \"warning\" | \"error\";\r\n\r\ninterface Log {\r\n  id: string;\r\n  timestamp: string;\r\n  level: LogLevel;\r\n  service: string;\r\n  message: string;\r\n  duration: string;\r\n  status: string;\r\n  tags: string[];\r\n}\r\n\r\ntype Filters = {\r\n  level: string[];\r\n  service: string[];\r\n  status: string[];\r\n};\r\n\r\nconst SAMPLE_LOGS: Log[] = [\r\n  {\r\n    id: \"1\",\r\n    timestamp: \"2024-11-08T14:32:45Z\",\r\n    level: \"info\",\r\n    service: \"api-gateway\",\r\n    message: \"Request processed successfully\",\r\n    duration: \"245ms\",\r\n    status: \"200\",\r\n    tags: [\"api\", \"success\"],\r\n  },\r\n  {\r\n    id: \"2\",\r\n    timestamp: \"2024-11-08T14:32:42Z\",\r\n    level: \"warning\",\r\n    service: \"cache-service\",\r\n    message: \"Cache miss ratio exceeds threshold\",\r\n    duration: \"1.2s\",\r\n    status: \"warning\",\r\n    tags: [\"cache\", \"performance\"],\r\n  },\r\n  {\r\n    id: \"3\",\r\n    timestamp: \"2024-11-08T14:32:40Z\",\r\n    level: \"error\",\r\n    service: \"database\",\r\n    message: \"Connection timeout to replica\",\r\n    duration: \"5.1s\",\r\n    status: \"503\",\r\n    tags: [\"db\", \"error\"],\r\n  },\r\n  {\r\n    id: \"4\",\r\n    timestamp: \"2024-11-08T14:32:38Z\",\r\n    level: \"info\",\r\n    service: \"auth-service\",\r\n    message: \"User session created\",\r\n    duration: \"156ms\",\r\n    status: \"201\",\r\n    tags: [\"auth\", \"session\"],\r\n  },\r\n  {\r\n    id: \"5\",\r\n    timestamp: \"2024-11-08T14:32:35Z\",\r\n    level: \"info\",\r\n    service: \"api-gateway\",\r\n    message: \"Webhook delivered\",\r\n    duration: \"432ms\",\r\n    status: \"200\",\r\n    tags: [\"webhook\", \"integration\"],\r\n  },\r\n  {\r\n    id: \"6\",\r\n    timestamp: \"2024-11-08T14:32:32Z\",\r\n    level: \"error\",\r\n    service: \"payment-service\",\r\n    message: \"Payment gateway unavailable\",\r\n    duration: \"2.3s\",\r\n    status: \"502\",\r\n    tags: [\"payment\", \"error\"],\r\n  },\r\n  {\r\n    id: \"7\",\r\n    timestamp: \"2024-11-08T14:32:30Z\",\r\n    level: \"info\",\r\n    service: \"search-service\",\r\n    message: \"Index updated\",\r\n    duration: \"876ms\",\r\n    status: \"200\",\r\n    tags: [\"search\", \"index\"],\r\n  },\r\n  {\r\n    id: \"8\",\r\n    timestamp: \"2024-11-08T14:32:28Z\",\r\n    level: \"warning\",\r\n    service: \"api-gateway\",\r\n    message: \"Rate limit approaching\",\r\n    duration: \"145ms\",\r\n    status: \"429\",\r\n    tags: [\"rate-limit\", \"warning\"],\r\n  },\r\n];\r\n\r\nconst levelStyles: Record<LogLevel, string> = {\r\n  info: \"bg-blue-500/10 text-blue-600 dark:text-blue-400\",\r\n  warning: \"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400\",\r\n  error: \"bg-red-500/10 text-red-600 dark:text-red-400\",\r\n};\r\n\r\nconst statusStyles: Record<string, string> = {\r\n  \"200\": \"text-green-600 dark:text-green-400\",\r\n  \"201\": \"text-green-600 dark:text-green-400\",\r\n  \"429\": \"text-yellow-600 dark:text-yellow-400\",\r\n  \"502\": \"text-red-600 dark:text-red-400\",\r\n  \"503\": \"text-red-600 dark:text-red-400\",\r\n  warning: \"text-yellow-600 dark:text-yellow-400\",\r\n};\r\n\r\nfunction LogRow({\r\n  log,\r\n  expanded,\r\n  onToggle,\r\n}: {\r\n  log: Log;\r\n  expanded: boolean;\r\n  onToggle: () => void;\r\n}) {\r\n  const formattedTime = new Date(log.timestamp).toLocaleTimeString(\"en-US\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <motion.button\r\n        onClick={onToggle}\r\n        className=\"w-full p-4 text-left transition-colors hover:bg-muted/50 active:bg-muted/70\"\r\n        whileHover={{ backgroundColor: \"rgba(0,0,0,0.02)\" }}\r\n      >\r\n        <div className=\"flex items-center gap-4\">\r\n          <motion.div\r\n            animate={{ rotate: expanded ? 180 : 0 }}\r\n            transition={{ duration: 0.2 }}\r\n            className=\"flex-shrink-0\"\r\n          >\r\n            <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\r\n          </motion.div>\r\n\r\n          <Badge\r\n            variant=\"secondary\"\r\n            className={`flex-shrink-0 capitalize ${levelStyles[log.level]}`}\r\n          >\r\n            {log.level}\r\n          </Badge>\r\n\r\n          <time className=\"w-20 flex-shrink-0 font-mono text-xs text-muted-foreground\">\r\n            {formattedTime}\r\n          </time>\r\n\r\n          <span className=\"flex-shrink-0 min-w-max text-sm font-medium text-foreground\">\r\n            {log.service}\r\n          </span>\r\n\r\n          <p className=\"flex-1 truncate text-sm text-muted-foreground\">\r\n            {log.message}\r\n          </p>\r\n\r\n          <span\r\n            className={`flex-shrink-0 font-mono text-sm font-semibold ${\r\n              statusStyles[log.status] ?? \"text-muted-foreground\"\r\n            }`}\r\n          >\r\n            {log.status}\r\n          </span>\r\n\r\n          <span className=\"w-16 flex-shrink-0 text-right font-mono text-xs text-muted-foreground\">\r\n            {log.duration}\r\n          </span>\r\n        </div>\r\n      </motion.button>\r\n\r\n      <AnimatePresence initial={false}>\r\n        {expanded && (\r\n          <motion.div\r\n            key=\"details\"\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: \"auto\", opacity: 1 }}\r\n            exit={{ height: 0, opacity: 0 }}\r\n            transition={{ duration: 0.2 }}\r\n            className=\"overflow-hidden border-t border-border bg-muted/50\"\r\n          >\r\n            <div className=\"space-y-4 p-4\">\r\n              <div>\r\n                <p className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n                  Message\r\n                </p>\r\n                <p className=\"rounded bg-background p-3 font-mono text-sm text-foreground\">\r\n                  {log.message}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <p className=\"mb-1 text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n                    Duration\r\n                  </p>\r\n                  <p className=\"font-mono text-foreground\">{log.duration}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"mb-1 text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n                    Timestamp\r\n                  </p>\r\n                  <p className=\"font-mono text-xs text-foreground\">\r\n                    {log.timestamp}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <p className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n                  Tags\r\n                </p>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {log.tags.map((tag) => (\r\n                    <Badge key={tag} variant=\"outline\" className=\"text-xs\">\r\n                      {tag}\r\n                    </Badge>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction FilterPanel({\r\n  filters,\r\n  onChange,\r\n  logs,\r\n}: {\r\n  filters: Filters;\r\n  onChange: (filters: Filters) => void;\r\n  logs: Log[];\r\n}) {\r\n  const levels = Array.from(new Set(logs.map((log) => log.level)));\r\n  const services = Array.from(new Set(logs.map((log) => log.service)));\r\n  const statuses = Array.from(new Set(logs.map((log) => log.status)));\r\n\r\n  const toggleFilter = (category: keyof Filters, value: string) => {\r\n    const current = filters[category];\r\n    const updated = current.includes(value)\r\n      ? current.filter((entry) => entry !== value)\r\n      : [...current, value];\r\n\r\n    onChange({\r\n      ...filters,\r\n      [category]: updated,\r\n    });\r\n  };\r\n\r\n  const clearAll = () => {\r\n    onChange({\r\n      level: [],\r\n      service: [],\r\n      status: [],\r\n    });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters).some(\r\n    (group) => group.length > 0\r\n  );\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      transition={{ delay: 0.05 }}\r\n      className=\"flex h-full flex-col space-y-6 overflow-y-auto bg-card p-4\"\r\n    >\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold text-foreground\">Filters</h3>\r\n        {hasActiveFilters && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={clearAll}\r\n            className=\"h-6 text-xs\"\r\n          >\r\n            Clear\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n          Level\r\n        </p>\r\n        <div className=\"space-y-2\">\r\n          {levels.map((level) => {\r\n            const selected = filters.level.includes(level);\r\n\r\n            return (\r\n              <motion.button\r\n                key={level}\r\n                type=\"button\"\r\n                whileHover={{ x: 2 }}\r\n                onClick={() => toggleFilter(\"level\", level)}\r\n                aria-pressed={selected}\r\n                className={`flex w-full items-center justify-between gap-2 border rounded-md px-3 py-2 text-sm transition-colors ${\r\n                  selected\r\n                    ? \"border-primary bg-primary/10 text-primary\"\r\n                    : \"border-border text-muted-foreground hover:border-primary/40 hover:bg-muted/40\"\r\n                }`}\r\n              >\r\n                <span className=\"capitalize\">{level}</span>\r\n                {selected && <Check className=\"h-3.5 w-3.5\" />}\r\n              </motion.button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n          Service\r\n        </p>\r\n        <div className=\"space-y-2\">\r\n          {services.map((service) => {\r\n            const selected = filters.service.includes(service);\r\n\r\n            return (\r\n              <motion.button\r\n                key={service}\r\n                type=\"button\"\r\n                whileHover={{ x: 2 }}\r\n                onClick={() => toggleFilter(\"service\", service)}\r\n                aria-pressed={selected}\r\n                className={`flex w-full items-center justify-between gap-2 border rounded-md px-3 py-2 text-sm transition-colors ${\r\n                  selected\r\n                    ? \"border-primary bg-primary/10 text-primary\"\r\n                    : \"border-border text-muted-foreground hover:border-primary/40 hover:bg-muted/40\"\r\n                }`}\r\n              >\r\n                <span>{service}</span>\r\n                {selected && <Check className=\"h-3.5 w-3.5\" />}\r\n              </motion.button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\">\r\n          Status\r\n        </p>\r\n        <div className=\"space-y-2\">\r\n          {statuses.map((status) => {\r\n            const selected = filters.status.includes(status);\r\n\r\n            return (\r\n              <motion.button\r\n                key={status}\r\n                type=\"button\"\r\n                whileHover={{ x: 2 }}\r\n                onClick={() => toggleFilter(\"status\", status)}\r\n                aria-pressed={selected}\r\n                className={`flex w-full items-center justify-between gap-2 border rounded-md px-3 py-2 text-sm transition-colors ${\r\n                  selected\r\n                    ? \"border-primary bg-primary/10 text-primary\"\r\n                    : \"border-border text-muted-foreground hover:border-primary/40 hover:bg-muted/40\"\r\n                }`}\r\n              >\r\n                <span>{status}</span>\r\n                {selected && <Check className=\"h-3.5 w-3.5\" />}\r\n              </motion.button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nexport function InteractiveLogsTable() {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [expandedId, setExpandedId] = useState<string | null>(null);\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [filters, setFilters] = useState<Filters>({\r\n    level: [],\r\n    service: [],\r\n    status: [],\r\n  });\r\n\r\n  const filteredLogs = useMemo(() => {\r\n    return SAMPLE_LOGS.filter((log) => {\r\n      const lowerQuery = searchQuery.toLowerCase();\r\n\r\n      const matchSearch =\r\n        log.message.toLowerCase().includes(lowerQuery) ||\r\n        log.service.toLowerCase().includes(lowerQuery);\r\n\r\n      const matchLevel =\r\n        filters.level.length === 0 || filters.level.includes(log.level);\r\n      const matchService =\r\n        filters.service.length === 0 || filters.service.includes(log.service);\r\n      const matchStatus =\r\n        filters.status.length === 0 || filters.status.includes(log.status);\r\n\r\n      return matchSearch && matchLevel && matchService && matchStatus;\r\n    });\r\n  }, [filters, searchQuery]);\r\n\r\n  const activeFilters =\r\n    filters.level.length + filters.service.length + filters.status.length;\r\n\r\n  return (\r\n    <main className=\"h-screen w-full bg-background\">\r\n      <div className=\"flex h-full flex-col\">\r\n        <div className=\"border-b border-border bg-card p-6\">\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-semibold text-foreground\">Logs</h1>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {filteredLogs.length} of {SAMPLE_LOGS.length} logs\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2\">\r\n              <div className=\"relative flex-1\">\r\n                <Search className=\"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder=\"Search logs by message or service...\"\r\n                  value={searchQuery}\r\n                  onChange={(event) => setSearchQuery(event.target.value)}\r\n                  className=\"h-9 pl-9 text-sm\"\r\n                />\r\n              </div>\r\n              <Button\r\n                variant={showFilters ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => setShowFilters((current) => !current)}\r\n                className=\"relative\"\r\n              >\r\n                <Filter className=\"h-4 w-4\" />\r\n                {activeFilters > 0 && (\r\n                  <Badge className=\"absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center p-0 text-xs bg-destructive\">\r\n                    {activeFilters}\r\n                  </Badge>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-1 overflow-hidden\">\r\n          <AnimatePresence initial={false}>\r\n            {showFilters && (\r\n              <motion.div\r\n                key=\"filters\"\r\n                initial={{ width: 0, opacity: 0 }}\r\n                animate={{ width: 280, opacity: 1 }}\r\n                exit={{ width: 0, opacity: 0 }}\r\n                transition={{ duration: 0.2 }}\r\n                className=\"overflow-hidden border-r border-border\"\r\n              >\r\n                <FilterPanel\r\n                  filters={filters}\r\n                  onChange={setFilters}\r\n                  logs={SAMPLE_LOGS}\r\n                />\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          <div className=\"flex-1 overflow-y-auto\">\r\n            <div className=\"divide-y divide-border\">\r\n              <AnimatePresence mode=\"popLayout\">\r\n                {filteredLogs.length > 0 ? (\r\n                  filteredLogs.map((log, index) => (\r\n                    <motion.div\r\n                      key={log.id}\r\n                      initial={{ opacity: 0, y: -10 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      exit={{ opacity: 0, y: -10 }}\r\n                      transition={{\r\n                        duration: 0.2,\r\n                        delay: index * 0.02,\r\n                      }}\r\n                    >\r\n                      <LogRow\r\n                        log={log}\r\n                        expanded={expandedId === log.id}\r\n                        onToggle={() =>\r\n                          setExpandedId((current) =>\r\n                            current === log.id ? null : log.id\r\n                          )\r\n                        }\r\n                      />\r\n                    </motion.div>\r\n                  ))\r\n                ) : (\r\n                  <motion.div\r\n                    key=\"empty-state\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    className=\"p-12 text-center\"\r\n                  >\r\n                    <p className=\"text-muted-foreground\">\r\n                      No logs match your filters.\r\n                    </p>\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n",
      "type": "registry:block",
      "target": "components/sections/interactive-logs-table"
    }
  ]
}